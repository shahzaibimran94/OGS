(function(c){var b=(function(){var h={};var g=null;var k={currencySymbol:"Rs",classCartIcon:"my-cart-icon",classCartBadge:"my-cart-badge",classProductQuantity:"my-product-quantity",classProductRemove:"my-product-remove",classCheckoutCart:"my-cart-checkout",affixCartIcon:true,showCheckoutModal:true,numberOfDecimals:2,cartItems:[],clickOnAddToCart:function(l){},afterAddOnCart:function(m,l,n){},clickOnCartIcon:function(m,n,l,o){},checkoutCart:function(m,l,n){},getDiscountPrice:function(m,l,n){return null}};var j=function(l){g=c.extend({},k);if(typeof l==="object"){c.extend(g,l)}};var i=function(){return g};h.loadOptions=j;h.getOptions=i;return h}());var f=(function(){var g={};var h=function(j){var i=b.getOptions();return j.toFixed(i.numberOfDecimals)};g.getRoundedNumber=h;return g}());var e=(function(){var j={};localStorage.products=localStorage.products?localStorage.products:"";var p=function(t){var r=-1;var s=g();c.each(s,function(u,v){if(v.id==t){r=u;return}});return r};var o=function(r){localStorage.products=JSON.stringify(r)};var l=function(x,s,r,t,w,v){var u=g();u.push({id:x,name:s,summary:r,price:t,quantity:w,image:v});o(u)};var g=function(){try{var s=JSON.parse(localStorage.products);return s}catch(r){return[]}};var q=function(u,t){var r=p(u);if(r<0){return false}var s=g();s[r].quantity=typeof t==="undefined"?s[r].quantity*1+1:t;o(s);return true};var m=function(w,s,r,t,v,u){if(typeof w==="undefined"){console.error("id required");return false}if(typeof s==="undefined"){console.error("name required");return false}if(typeof u==="undefined"){console.error("image required");return false}if(!c.isNumeric(t)){console.error("price is not a number");return false}if(!c.isNumeric(v)){console.error("quantity is not a number");return false}r=typeof r==="undefined"?"":r;if(!q(w)){l(w,s,r,t,v,u)}};var n=function(){o([])};var k=function(s){var r=g();r=c.grep(r,function(u,t){return u.id!=s});o(r)};var i=function(){var r=0;var s=g();c.each(s,function(t,u){r+=u.quantity*1});return r};var h=function(){var s=g();var r=0;c.each(s,function(t,u){r+=u.quantity*u.price;r=f.getRoundedNumber(r)*1});return r};j.getAllProducts=g;j.updatePoduct=q;j.setProduct=m;j.clearProduct=n;j.removeProduct=k;j.getTotalQuantity=i;j.getTotalPrice=h;return j}());var a=function(){var j=b.getOptions();var r=c("."+j.classCartIcon);var p=c("."+j.classCartBadge);var v=j.classProductQuantity;var i=j.classProductRemove;var q=j.classCheckoutCart;var t="my-cart-modal";var u="my-cart-table";var g="my-cart-grand-total";var x="my-cart-empty-message";var w="my-cart-discount-price";var h="my-product-total";var o="my-cart-icon-affix";if(j.cartItems&&j.cartItems.constructor===Array){e.clearProduct();c.each(j.cartItems,function(){e.setProduct(this.id,this.name,this.summary,this.price,this.quantity,this.image)})}p.text(e.getTotalQuantity());if(!c("#"+t).length){c("body").append('<div class="modal fade" id="'+t+'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel"><span class="glyphicon glyphicon-shopping-cart"></span> My Cart</h4></div><div class="modal-body"><table class="table table-hover table-responsive" id="'+u+'"></table></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button><button type="button" class="btn btn-primary '+q+'">Checkout</button></div></div></div></div>')}var z=function(){var A=c("#"+u);A.empty();var C=e.getAllProducts();c.each(C,function(){var D=this.quantity*this.price;A.append('<tr title="'+this.summary+'" data-id="'+this.id+'" data-price="'+this.price+'"><td class="text-center" style="width: 30px;"><img width="30px" height="30px" src="'+this.image+'"/></td><td>'+this.name+'</td><td title="Unit Price">'+j.currencySymbol+f.getRoundedNumber(this.price)+'</td><td title="Quantity"><input type="number" min="1" style="width: 70px;" class="'+v+'" value="'+this.quantity+'"/></td><td title="Total" class="'+h+'">'+j.currencySymbol+f.getRoundedNumber(D)+'</td><td title="Remove from Cart" class="text-center" style="width: 30px;"><a href="javascript:void(0);" class="btn btn-xs btn-danger '+i+'">X</a></td></tr>')});A.append(C.length?'<tr><td></td><td><strong>Total</strong></td><td></td><td></td><td><strong id="'+g+'"></strong></td><td></td></tr>':'<div class="alert alert-danger" role="alert" id="'+x+'">Your cart is empty</div>');var B=j.getDiscountPrice(C,e.getTotalPrice(),e.getTotalQuantity());if(C.length&&B!==null){A.append('<tr><td></td><td></td><td><br>Delivery Details!</td><td></td><td></td><td></td></tr><tr><td></td><td><br>FullName</td><td style="width:20%;"><br><input type="text" name="fullname" style="width:150%;"/></td><td></td><td></td><td></td></tr><tr><td></td><td><br>Email</td><td style="width:20%;"><br><input type="email" name="email" style="width:150%;"/></td><td></td><td></td><td></td></tr><tr><td></td><td><br>Phone Number</td><td style="width:20%;"><br><input type="text" name="contact" style="width:150%;"/></td><td></td><td></td><td></td></tr><tr><td></td><td><br>Address</td><td style="width:20%;"><br><input type="text" name="address" style="width:150%;"/></td><td></td><td></td><td></td></tr>')}s();n()};var l=function(){z();c("#"+t).modal("show")};var y=function(){c.each(c("."+v),function(){var A=c(this).closest("tr").data("id");e.updatePoduct(A,c(this).val())})};var s=function(){c("#"+g).text(j.currencySymbol+f.getRoundedNumber(e.getTotalPrice()))};var n=function(){c("#"+w).text(j.currencySymbol+f.getRoundedNumber(j.getDiscountPrice(e.getAllProducts(),e.getTotalPrice(),e.getTotalQuantity())))};if(j.affixCartIcon){var k=r.offset().top*1+r.css("height").match(/\d+/)*1;var m=r.css("position");c(window).scroll(function(){c(window).scrollTop()>=k?r.addClass(o):r.removeClass(o)})}r.click(function(){j.showCheckoutModal?l():j.clickOnCartIcon(r,e.getAllProducts(),e.getTotalPrice(),e.getTotalQuantity())});c(document).on("input","."+v,function(){var A=c(this).closest("tr").data("price");var C=c(this).closest("tr").data("id");var B=c(this).val();c(this).parent("td").next("."+h).text(j.currencySymbol+f.getRoundedNumber(A*B));e.updatePoduct(C,B);p.text(e.getTotalQuantity());s();n()});c(document).on("keypress","."+v,function(A){if(A.keyCode==38||A.keyCode==40){return}A.preventDefault()});c(document).on("click","."+i,function(){var A=c(this).closest("tr");var B=A.data("id");A.hide(500,function(){e.removeProduct(B);z();p.text(e.getTotalQuantity())})});c("."+q).click(function(){var A=e.getAllProducts();if(!A.length){c("#"+x).fadeTo("fast",0.5).fadeTo("fast",1);return}y();j.checkoutCart(e.getAllProducts(),e.getTotalPrice(),e.getTotalQuantity());e.clearProduct();p.text(e.getTotalQuantity());c("#"+t).modal("hide")})};var d=function(k){var g=c(k);var h=b.getOptions();var i=c("."+h.classCartIcon);var j=c("."+h.classCartBadge);g.click(function(){h.clickOnAddToCart(g);var q=g.data("id");var m=g.data("name");var l=g.data("summary");var n=g.data("price");var p=g.data("quantity");var o=g.data("image");e.setProduct(q,m,l,n,p,o);j.text(e.getTotalQuantity());h.afterAddOnCart(e.getAllProducts(),e.getTotalPrice(),e.getTotalQuantity())})};c.fn.myCart=function(g){b.loadOptions(g);a();return c.each(this,function(){new d(this)})}})(jQuery); 
